var upvoteButton = $('#upvote-<%= voteable.id %>');
var downvoteButton = $('#downvote-<%= voteable.id %>');
var sumSelector = $('#sum-<%= voteable.id %>');
var sum = parseInt(sumSelector.html());

<% if initial_state == :no_vote %>
  sum += 1;
  sumSelector[0].innerHTML = sum;
  upvoteButton.addClass('upvoted');
  upvoteButton.css('color', 'orange');
<% elsif initial_state == :upvoted %>
  sum -= 1;
  sumSelector[0].innerHTML = sum;
  upvoteButton.removeClass('upvoted');
  upvoteButton.css('color', '');
<% else %>
  sum += 2;
  sumSelector[0].innerHTML = sum;
  downvoteButton.removeClass('downvoted');
  downvoteButton.css('color', '');
  upvoteButton.addClass('upvoted');
  upvoteButton.css('color', 'orange');
<% end %>
